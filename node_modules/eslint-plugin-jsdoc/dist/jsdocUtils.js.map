{"version":3,"sources":["../src/jsdocUtils.js"],"names":["tagNames","closureTags","jsdocTags","getFunctionParameterNames","functionNode","getParamName","param","_","has","name","left","type","get","argument","parameter","Error","params","map","getJsdocParameterNamesDeep","jsdoc","targetTagName","jsdocParameterNames","filter","tags","tag","getJsdocParameterNames","includes","getPreferredTagName","tagPreference","prefValues","values","some","prefVal","replacement","preferredTagName","findKey","aliases","isValidTag","definedTags","validTagNames","keys","concat","flatten","additionalTags","allTags","hasTag","targetTagLower","toLowerCase","doc","hasATag","targetTagNames","hasDefinedTypeReturnTag","tagType","trim","tagsWithMandatoryType","tagsWithOptionalType","namepathDefiningTags","tagsWithOptionalNamepath","tagsWithMandatoryNamepath","tagsWithMandatoryTypeOrNamepath","isNamepathDefiningTag","tagName","tagMightHaveType","tagMustHaveType","tagMightHaveNamepath","tagMustHaveNamepath","tagMightHaveEitherTypeOrNamepath","tagMustHaveEitherTypeOrNamepath","hasReturnValue","node","expression","body","bodyNode","consequent","alternate","block","handler","finalizer","cases","someCase","parseClosureTemplateTag","source","split","enforcedContexts","context","defaultContexts","options","contexts","getContextObject","checkJsdoc","reduce","obj","prop","filterTags","tagsWithNamesAndDescriptions","getTagsByType","descName","tagsWithoutNames","tagsWithNames","tagWithName","push","getAncestor","sourceCode","nde","depth","idx","prevToken","getTokenBefore","getIndent","indent","text","match","charAt"],"mappings":"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","sourcesContent":["import _ from 'lodash';\nimport {jsdocTags, closureTags} from './tagNames';\n\n// Todo: Distinguish closure tags\nconst tagNames = {\n  ...closureTags,\n  ...jsdocTags,\n};\n\nconst getFunctionParameterNames = (functionNode : Object) : Array<string> => {\n  const getParamName = (param) => {\n    if (_.has(param, 'name')) {\n      return param.name;\n    }\n\n    if (_.has(param, 'left.name')) {\n      return param.left.name;\n    }\n\n    if (param.type === 'ObjectPattern' || _.get(param, 'left.type') === 'ObjectPattern') {\n      return '<ObjectPattern>';\n    }\n\n    if (param.type === 'ArrayPattern' || _.get(param, 'left.type') === 'ArrayPattern') {\n      return '<ArrayPattern>';\n    }\n\n    if (param.type === 'RestElement') {\n      return param.argument.name;\n    }\n\n    if (param.type === 'TSParameterProperty') {\n      return getParamName(param.parameter);\n    }\n\n    throw new Error('Unsupported function signature format.');\n  };\n\n  return functionNode.params.map(getParamName);\n};\n\n/**\n * Gets all parameter names, including those that refer to a path, e.g. \"@param foo; @param foo.bar\".\n */\nconst getJsdocParameterNamesDeep = (jsdoc : Object, targetTagName : string) : Array<string> => {\n  let jsdocParameterNames;\n\n  jsdocParameterNames = _.filter(jsdoc.tags, {\n    tag: targetTagName,\n  });\n\n  jsdocParameterNames = _.map(jsdocParameterNames, 'name');\n\n  return jsdocParameterNames;\n};\n\nconst getJsdocParameterNames = (jsdoc : Object, targetTagName : string) : Array<string> => {\n  let jsdocParameterNames;\n\n  jsdocParameterNames = getJsdocParameterNamesDeep(jsdoc, targetTagName);\n\n  jsdocParameterNames = jsdocParameterNames.filter((name) => {\n    return !name.includes('.');\n  });\n\n  return jsdocParameterNames;\n};\n\nconst getPreferredTagName = (name : string, tagPreference : Object = {}) : string => {\n  const prefValues = _.values(tagPreference);\n  if (prefValues.includes(name) || prefValues.some((prefVal) => {\n    return prefVal && typeof prefVal === 'object' && prefVal.replacement === name;\n  })) {\n    return name;\n  }\n\n  if (_.has(tagPreference, name)) {\n    return tagPreference[name];\n  }\n\n  const preferredTagName = _.findKey(tagNames, (aliases) => {\n    return aliases.includes(name);\n  });\n  if (preferredTagName) {\n    return preferredTagName;\n  }\n\n  return name;\n};\n\nconst isValidTag = (name : string, definedTags : Array) : boolean => {\n  const validTagNames = _.keys(tagNames).concat(_.flatten(_.values(tagNames)));\n  const additionalTags = definedTags;\n  const allTags = validTagNames.concat(additionalTags);\n\n  return allTags.includes(name);\n};\n\nconst hasTag = (jsdoc : Object, targetTagName : string) : boolean => {\n  const targetTagLower = targetTagName.toLowerCase();\n\n  return _.some(jsdoc.tags, (doc : Object) => {\n    return doc.tag.toLowerCase() === targetTagLower;\n  });\n};\n\nconst hasATag = (jsdoc : Object, targetTagNames : Array) : boolean => {\n  return targetTagNames.some((targetTagName) => {\n    return hasTag(jsdoc, targetTagName);\n  });\n};\n\n/**\n * Checks if the JSDoc comment declares a return value.\n *\n * @param {JsDocTag} tag\n *   the tag which should be checked.\n * @returns {boolean}\n *   true in case a return value is declared; otherwise false.\n */\nconst hasDefinedTypeReturnTag = (tag) => {\n  // The function should not continue in the event @returns is not defined...\n  if (typeof tag === 'undefined' || tag === null) {\n    return false;\n  }\n\n  // .. same applies if it declares `@returns {undefined}` or `@returns {void}`\n  const tagType = tag.type.trim();\n  if (tagType === 'undefined' || tagType === 'void') {\n    return false;\n  }\n\n  // In any other case, something must be returned, and\n  // a return statement is expected\n  return true;\n};\n\nconst tagsWithMandatoryType = [\n  'implements',\n  'type',\n];\n\nconst tagsWithOptionalType = [\n  'enum',\n  'member', 'var',\n  'module',\n  'typedef',\n  'augments', 'extends',\n  'class', 'constructor',\n  'constant', 'const',\n  'namespace',\n  'param', 'arg', 'argument',\n  'property', 'prop',\n  'returns', 'return',\n  'throws', 'exception',\n  'yields', 'yield',\n\n  // Todo: Omit these GCC specific items when in non-GCC mode after landing https://github.com/gajus/eslint-plugin-jsdoc/issues/356\n  'package',\n  'private',\n  'protected',\n  'public',\n  'static',\n];\n\nconst namepathDefiningTags = [\n  'external', 'host',\n  'name',\n  'typedef',\n  'event',\n  'class', 'constructor',\n  'constant', 'const',\n  'callback',\n  'function', 'func', 'method',\n  'interface',\n  'member', 'var',\n  'mixin',\n  'namespace',\n];\n\nconst tagsWithOptionalNamepath = [\n  ...namepathDefiningTags,\n  'alias',\n  'augments', 'extends',\n\n  // `borrows` has a different format, however, so needs special parsing\n  'borrows',\n  'emits', 'fires',\n  'lends',\n  'listens',\n  'memberof', 'memberof!',\n  'mixes',\n  'see',\n  'this',\n];\n\nconst tagsWithMandatoryNamepath = [\n  'callback',\n  'external', 'host',\n  'name',\n  'typedef',\n];\n\nconst tagsWithMandatoryTypeOrNamepath = [\n  'alias',\n  'augments', 'extends',\n  'borrows',\n  'external', 'host',\n  'lends',\n  'memberof', 'memberof!',\n  'mixes',\n  'name',\n  'this',\n  'typedef',\n];\n\nconst isNamepathDefiningTag = (tagName) => {\n  return namepathDefiningTags.includes(tagName);\n};\n\nconst tagMightHaveType = (tag) => {\n  return tagsWithMandatoryType.includes(tag) || tagsWithOptionalType.includes(tag);\n};\n\nconst tagMustHaveType = (tag) => {\n  return tagsWithMandatoryType.includes(tag);\n};\n\nconst tagMightHaveNamepath = (tag) => {\n  return tagsWithOptionalNamepath.includes(tag);\n};\n\nconst tagMustHaveNamepath = (tag) => {\n  return tagsWithMandatoryNamepath.includes(tag);\n};\n\nconst tagMightHaveEitherTypeOrNamepath = (tag) => {\n  return tagMightHaveType(tag) || tagMightHaveNamepath(tag);\n};\n\nconst tagMustHaveEitherTypeOrNamepath = (tag) => {\n  return tagsWithMandatoryTypeOrNamepath.includes(tag);\n};\n\n/**\n * Checks if a node has a return statement. Void return does not count.\n *\n * @param {object} node\n * @returns {boolean}\n */\n// eslint-disable-next-line complexity\nconst hasReturnValue = (node) => {\n  if (!node) {\n    return false;\n  }\n  switch (node.type) {\n  case 'FunctionExpression':\n  case 'FunctionDeclaration':\n  case 'ArrowFunctionExpression': {\n    return node.expression || hasReturnValue(node.body);\n  }\n  case 'BlockStatement': {\n    return node.body.some((bodyNode) => {\n      return bodyNode.type !== 'FunctionDeclaration' && hasReturnValue(bodyNode);\n    });\n  }\n  case 'WhileStatement':\n  case 'DoWhileStatement':\n  case 'ForStatement':\n  case 'ForInStatement':\n  case 'ForOfStatement':\n  case 'WithStatement': {\n    return hasReturnValue(node.body);\n  }\n  case 'IfStatement': {\n    return hasReturnValue(node.consequent) || hasReturnValue(node.alternate);\n  }\n  case 'TryStatement': {\n    return hasReturnValue(node.block) ||\n      hasReturnValue(node.handler && node.handler.body) ||\n      hasReturnValue(node.finalizer);\n  }\n  case 'SwitchStatement': {\n    return node.cases.some(\n      (someCase) => {\n        return someCase.consequent.some(hasReturnValue);\n      }\n    );\n  }\n  case 'ReturnStatement': {\n    // void return does not count.\n    if (node.argument === null) {\n      return false;\n    }\n\n    return true;\n  }\n  default: {\n    return false;\n  }\n  }\n};\n\n/** @param {string} tag */\n/*\nconst isInlineTag = (tag) => {\n  return /^(@link|@linkcode|@linkplain|@tutorial) /.test(tag);\n};\n*/\n\n/**\n * Parses GCC Generic/Template types\n *\n * @see {https://github.com/google/closure-compiler/wiki/Generic-Types}\n * @param {JsDocTag} tag\n * @returns {Array<string>}\n */\nconst parseClosureTemplateTag = (tag) => {\n  return tag.source\n    .split('@template')[1]\n    .split(',')\n    .map((type) => {\n      return type.trim();\n    });\n};\n\n/**\n * Checks user option for `contexts` array, defaulting to\n *   contexts designated by the rule. Returns an array of\n *   ESTree AST types, indicating allowable contexts.\n *\n * @param {*} context\n * @param {true|string[]} defaultContexts\n * @returns {string[]}\n */\nconst enforcedContexts = (context, defaultContexts) => {\n  const {\n    /* istanbul ignore next */\n    contexts = defaultContexts === true ? [\n      'ArrowFunctionExpression',\n      'FunctionDeclaration',\n      'FunctionExpression',\n    ] : defaultContexts,\n  } = context.options[0] || {};\n\n  return contexts;\n};\n\n/**\n * @param {string[]} contexts\n * @param {Function} checkJsdoc\n */\nconst getContextObject = (contexts, checkJsdoc) => {\n  return contexts.reduce((obj, prop) => {\n    obj[prop] = checkJsdoc;\n\n    return obj;\n  }, {});\n};\n\nconst filterTags = (tags = [], filter) => {\n  return tags.filter(filter);\n};\n\nconst tagsWithNamesAndDescriptions = [\n  'param', 'arg', 'argument', 'property', 'prop',\n\n  // These two are parsed by our custom parser as though having a `name`\n  'returns', 'return',\n];\n\nconst getTagsByType = (tags, tagPreference) => {\n  const descName = getPreferredTagName('description', tagPreference);\n  const tagsWithoutNames = [];\n  const tagsWithNames = filterTags(tags, (tag) => {\n    const {tag: tagName} = tag;\n    const tagWithName = tagsWithNamesAndDescriptions.includes(tagName);\n    if (!tagWithName && tagName !== descName) {\n      tagsWithoutNames.push(tag);\n    }\n\n    return tagWithName;\n  });\n\n  return {\n    tagsWithNames,\n    tagsWithoutNames,\n  };\n};\n\nconst getAncestor = (sourceCode, nde, depth, idx = 0) => {\n  if (idx === depth) {\n    return nde;\n  }\n  const prevToken = sourceCode.getTokenBefore(nde);\n  if (prevToken) {\n    return getAncestor(sourceCode, prevToken, depth, idx + 1);\n  }\n\n  return null;\n};\n\nconst getIndent = (sourceCode) => {\n  let indent = sourceCode.text.match(/^\\n*([ \\t]+)/);\n  /* istanbul ignore next */\n  indent = indent ? indent[1] + indent[1].charAt() : ' ';\n\n  return indent;\n};\n\nexport default {\n  enforcedContexts,\n  filterTags,\n  getAncestor,\n  getContextObject,\n  getFunctionParameterNames,\n  getIndent,\n  getJsdocParameterNames,\n  getJsdocParameterNamesDeep,\n  getPreferredTagName,\n  getTagsByType,\n  hasATag,\n  hasDefinedTypeReturnTag,\n  hasReturnValue,\n  hasTag,\n  isNamepathDefiningTag,\n  isValidTag,\n  parseClosureTemplateTag,\n  tagMightHaveEitherTypeOrNamepath,\n  tagMightHaveNamepath,\n  tagMightHaveType,\n  tagMustHaveEitherTypeOrNamepath,\n  tagMustHaveNamepath,\n  tagMustHaveType,\n};\n"],"file":"jsdocUtils.js"}