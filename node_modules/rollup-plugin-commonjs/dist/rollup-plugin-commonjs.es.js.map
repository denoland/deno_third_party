{"version":3,"file":"rollup-plugin-commonjs.es.js","sources":["../src/helpers.js","../src/defaultResolver.js","../src/ast-utils.js","../src/utils.js","../src/transform.js","../src/index.js"],"sourcesContent":["export const HELPERS_ID = '\\0commonjsHelpers';\n\nexport const HELPERS = `\nexport var commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nexport function commonjsRequire () {\n\tthrow new Error('Dynamic requires are not currently supported by rollup-plugin-commonjs');\n}\n\nexport function unwrapExports (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nexport function createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}`;\n\nexport const PREFIX = '\\0commonjs-proxy:';\nexport const EXTERNAL = '\\0commonjs-external:';\n","import * as fs from 'fs';\nimport { dirname, resolve } from 'path';\n\nfunction isFile ( file ) {\n\ttry {\n\t\tconst stats = fs.statSync( file );\n\t\treturn stats.isFile();\n\t} catch ( err ) {\n\t\treturn false;\n\t}\n}\n\nfunction addJsExtensionIfNecessary ( file ) {\n\tif ( isFile( file ) ) return file;\n\n\tfile += '.js';\n\tif ( isFile( file ) ) return file;\n\n\treturn null;\n}\n\nconst absolutePath = /^(?:\\/|(?:[A-Za-z]:)?[\\\\|/])/;\n\nfunction isAbsolute ( path ) {\n\treturn absolutePath.test( path );\n}\n\nexport default function defaultResolver ( importee, importer ) {\n\t// absolute paths are left untouched\n\tif ( isAbsolute( importee ) ) return addJsExtensionIfNecessary( resolve( importee ) );\n\n\t// if this is the entry point, resolve against cwd\n\tif ( importer === undefined ) return addJsExtensionIfNecessary( resolve( process.cwd(), importee ) );\n\n\t// external modules are skipped at this stage\n\tif ( importee[0] !== '.' ) return null;\n\n\treturn addJsExtensionIfNecessary( resolve( dirname( importer ), importee ) );\n}\n","export function isReference ( node, parent ) {\n\tif ( parent.type === 'MemberExpression' ) return parent.computed || node === parent.object;\n\n\t// disregard the `bar` in { bar: foo }\n\tif ( parent.type === 'Property' && node !== parent.value ) return false;\n\n\t// disregard the `bar` in `class Foo { bar () {...} }`\n\tif ( parent.type === 'MethodDefinition' ) return false;\n\n\t// disregard the `bar` in `export { foo as bar }`\n\tif ( parent.type === 'ExportSpecifier' && node !== parent.local ) return false;\n\n\treturn true;\n}\n\nexport function flatten ( node ) {\n\tconst parts = [];\n\n\twhile ( node.type === 'MemberExpression' ) {\n\t\tif ( node.computed ) return null;\n\n\t\tparts.unshift( node.property.name );\n\t\tnode = node.object;\n\t}\n\n\tif ( node.type !== 'Identifier' ) return null;\n\n\tconst name = node.name;\n\tparts.unshift( name );\n\n\treturn { name, keypath: parts.join( '.' ) };\n}\n\nexport function extractNames ( node ) {\n\tconst names = [];\n\textractors[ node.type ]( names, node );\n\treturn names;\n}\n\nconst extractors = {\n\tIdentifier ( names, node ) {\n\t\tnames.push( node.name );\n\t},\n\n\tObjectPattern ( names, node ) {\n\t\tnode.properties.forEach( prop => {\n\t\t\textractors[ prop.value.type ]( names, prop.value );\n\t\t});\n\t},\n\n\tArrayPattern ( names, node ) {\n\t\tnode.elements.forEach( element => {\n\t\t\tif ( element ) extractors[ element.type ]( names, element );\n\t\t});\n\t},\n\n\tRestElement ( names, node ) {\n\t\textractors[ node.argument.type ]( names, node.argument );\n\t},\n\n\tAssignmentPattern ( names, node ) {\n\t\textractors[ node.left.type ]( names, node.left );\n\t}\n};\n\n\nexport function isTruthy ( node ) {\n\tif ( node.type === 'Literal' ) return !!node.value;\n\tif ( node.type === 'ParenthesizedExpression' ) return isTruthy( node.expression );\n\tif ( node.operator in operators ) return operators[ node.operator ]( node );\n}\n\nexport function isFalsy ( node ) {\n\treturn not( isTruthy( node ) );\n}\n\nfunction not ( value ) {\n\treturn value === undefined ? value : !value;\n}\n\nfunction equals ( a, b, strict ) {\n\tif ( a.type !== b.type ) return undefined;\n\tif ( a.type === 'Literal' ) return strict ? a.value === b.value : a.value == b.value;\n}\n\nconst operators = {\n\t'==': x => {\n\t\treturn equals( x.left, x.right, false );\n\t},\n\n\t'!=': x => not( operators['==']( x ) ),\n\n\t'===': x => {\n\t\treturn equals( x.left, x.right, true );\n\t},\n\n\t'!==': x => not( operators['===']( x ) ),\n\n\t'!': x => isFalsy( x.argument ),\n\n\t'&&': x => isTruthy( x.left ) && isTruthy( x.right ),\n\n\t'||': x => isTruthy( x.left ) || isTruthy( x.right )\n};\n","import { basename, extname, dirname, sep } from 'path';\nimport { makeLegalIdentifier } from 'rollup-pluginutils';\n\nexport function getName ( id ) {\n\tconst name = makeLegalIdentifier( basename( id, extname( id ) ) );\n\tif (name !== 'index') {\n\t\treturn name;\n\t} else {\n\t\tconst segments = dirname( id ).split( sep );\n\t\treturn makeLegalIdentifier( segments[segments.length - 1] );\n\t}\n}\n\n","import { walk } from 'estree-walker';\nimport MagicString from 'magic-string';\nimport { attachScopes, makeLegalIdentifier } from 'rollup-pluginutils';\nimport { extractNames, flatten, isReference, isTruthy, isFalsy } from './ast-utils.js';\nimport { PREFIX, HELPERS_ID } from './helpers.js';\nimport { getName } from './utils.js';\n\nconst reserved = 'abstract arguments boolean break byte case catch char class const continue debugger default delete do double else enum eval export extends false final finally float for from function goto if implements import in instanceof int interface let long native new null package private protected public return short static super switch synchronized this throw throws transient true try typeof var void volatile while with yield'.split( ' ' );\nconst blacklist = { __esModule: true };\nreserved.forEach( word => blacklist[ word ] = true );\n\nconst exportsPattern = /^(?:module\\.)?exports(?:\\.([a-zA-Z_$][a-zA-Z_$0-9]*))?$/;\n\nconst firstpassGlobal = /\\b(?:require|module|exports|global)\\b/;\nconst firstpassNoGlobal = /\\b(?:require|module|exports)\\b/;\nconst importExportDeclaration = /^(?:Import|Export(?:Named|Default))Declaration/;\nconst functionType = /^(?:FunctionDeclaration|FunctionExpression|ArrowFunctionExpression)$/;\n\nfunction deconflict ( scope, globals, identifier ) {\n\tlet i = 1;\n\tlet deconflicted = identifier;\n\n\twhile ( scope.contains( deconflicted ) || globals.has( deconflicted ) || deconflicted in blacklist ) deconflicted = `${identifier}_${i++}`;\n\tscope.declarations[ deconflicted ] = true;\n\n\treturn deconflicted;\n}\n\nfunction tryParse ( parse, code, id ) {\n\ttry {\n\t\treturn parse( code, { allowReturnOutsideFunction: true });\n\t} catch ( err ) {\n\t\terr.message += ` in ${id}`;\n\t\tthrow err;\n\t}\n}\n\nexport function checkFirstpass (code, ignoreGlobal) {\n\tconst firstpass = ignoreGlobal ? firstpassNoGlobal : firstpassGlobal;\n\treturn firstpass.test(code);\n}\n\nexport function checkEsModule ( parse, code, id ) {\n\tconst ast = tryParse( parse, code, id );\n\n\t// if there are top-level import/export declarations, this is ES not CommonJS\n\tlet hasDefaultExport = false;\n\tlet isEsModule = false;\n\tfor ( const node of ast.body ) {\n\t\tif ( node.type === 'ExportDefaultDeclaration' )\n\t\t\thasDefaultExport = true;\n\t\tif ( importExportDeclaration.test( node.type ) )\n\t\t\tisEsModule = true;\n\t}\n\n\treturn { isEsModule, hasDefaultExport, ast };\n}\n\nexport function transformCommonjs ( parse, code, id, isEntry, ignoreGlobal, ignoreRequire, customNamedExports, sourceMap, allowDynamicRequire, astCache ) {\n\tconst ast = astCache || tryParse( parse, code, id );\n\n\tconst magicString = new MagicString( code );\n\n\tconst required = {};\n\t// Because objects have no guaranteed ordering, yet we need it,\n\t// we need to keep track of the order in a array\n\tconst sources = [];\n\n\tlet uid = 0;\n\n\tlet scope = attachScopes( ast, 'scope' );\n\tconst uses = { module: false, exports: false, global: false, require: false };\n\n\tlet lexicalDepth = 0;\n\tlet programDepth = 0;\n\n\tconst globals = new Set();\n\n\tconst HELPERS_NAME = deconflict( scope, globals, 'commonjsHelpers' ); // TODO technically wrong since globals isn't populated yet, but ¯\\_(ツ)_/¯\n\n\tconst namedExports = {};\n\n\t// TODO handle transpiled modules\n\tlet shouldWrap = /__esModule/.test( code );\n\n\tfunction isRequireStatement ( node ) {\n\t\tif ( !node ) return;\n\t\tif ( node.type !== 'CallExpression' ) return;\n\t\tif ( node.callee.name !== 'require' || scope.contains( 'require' ) ) return;\n\t\tif ( node.arguments.length !== 1 || (node.arguments[0].type !== 'Literal' && (node.arguments[0].type !== 'TemplateLiteral' || node.arguments[0].expressions.length > 0) ) ) return; // TODO handle these weird cases?\n\t\tif ( ignoreRequire( node.arguments[0].value ) ) return;\n\n\t\treturn true;\n\t}\n\n\tfunction getRequired ( node, name ) {\n\t\tconst source = node.arguments[0].type === 'Literal' ? node.arguments[0].value : node.arguments[0].quasis[0].value.cooked;\n\n\t\tconst existing = required[ source ];\n\t\tif ( existing === undefined ) {\n\t\t\tsources.push( source );\n\n\t\t\tif ( !name ) {\n\t\t\t\tdo name = `require$$${uid++}`;\n\t\t\t\twhile ( scope.contains( name ) );\n\t\t\t}\n\n\t\t\trequired[ source ] = { source, name, importsDefault: false };\n\t\t}\n\n\t\treturn required[ source ];\n\t}\n\n\t// do a first pass, see which names are assigned to. This is necessary to prevent\n\t// illegally replacing `var foo = require('foo')` with `import foo from 'foo'`,\n\t// where `foo` is later reassigned. (This happens in the wild. CommonJS, sigh)\n\tconst assignedTo = new Set();\n\twalk( ast, {\n\t\tenter ( node ) {\n\t\t\tif ( node.type !== 'AssignmentExpression' ) return;\n\t\t\tif ( node.left.type === 'MemberExpression' ) return;\n\n\t\t\textractNames( node.left ).forEach( name => {\n\t\t\t\tassignedTo.add( name );\n\t\t\t});\n\t\t}\n\t});\n\n\twalk( ast, {\n\t\tenter ( node, parent ) {\n\t\t\tif ( sourceMap ) {\n\t\t\t\tmagicString.addSourcemapLocation( node.start );\n\t\t\t\tmagicString.addSourcemapLocation( node.end );\n\t\t\t}\n\n\t\t\t// skip dead branches\n\t\t\tif ( parent && ( parent.type === 'IfStatement' || parent.type === 'ConditionalExpression' ) ) {\n\t\t\t\tif ( node === parent.consequent && isFalsy( parent.test ) ) return this.skip();\n\t\t\t\tif ( node === parent.alternate && isTruthy( parent.test ) ) return this.skip();\n\t\t\t}\n\n\t\t\tif ( node._skip ) return this.skip();\n\n\t\t\tprogramDepth += 1;\n\n\t\t\tif ( node.scope ) scope = node.scope;\n\t\t\tif ( functionType.test( node.type ) ) lexicalDepth += 1;\n\n\t\t\t// if toplevel return, we need to wrap it\n\t\t\tif ( node.type === 'ReturnStatement' && lexicalDepth === 0 ) {\n\t\t\t\tshouldWrap = true;\n\t\t\t}\n\n\t\t\t// rewrite `this` as `commonjsHelpers.commonjsGlobal`\n\t\t\tif ( node.type === 'ThisExpression' && lexicalDepth === 0 ) {\n\t\t\t\tuses.global = true;\n\t\t\t\tif ( !ignoreGlobal ) magicString.overwrite( node.start, node.end, `${HELPERS_NAME}.commonjsGlobal`, { storeName: true } );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// rewrite `typeof module`, `typeof module.exports` and `typeof exports` (https://github.com/rollup/rollup-plugin-commonjs/issues/151)\n\t\t\tif ( node.type === 'UnaryExpression' && node.operator === 'typeof' ) {\n\t\t\t\tconst flattened = flatten( node.argument );\n\t\t\t\tif ( !flattened ) return;\n\n\t\t\t\tif ( scope.contains( flattened.name ) ) return;\n\n\t\t\t\tif ( flattened.keypath === 'module.exports' || flattened.keypath === 'module' || flattened.keypath === 'exports' ) {\n\t\t\t\t\tmagicString.overwrite( node.start, node.end, `'object'`, { storeName: false } );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// rewrite `require` (if not already handled) `global` and `define`, and handle free references to\n\t\t\t// `module` and `exports` as these mean we need to wrap the module in commonjsHelpers.createCommonjsModule\n\t\t\tif ( node.type === 'Identifier' ) {\n\t\t\t\tif ( isReference( node, parent ) && !scope.contains( node.name ) ) {\n\t\t\t\t\tif ( node.name in uses ) {\n\t\t\t\t\t\tif ( node.name === 'require' ) {\n\t\t\t\t\t\t\tif ( allowDynamicRequire ) return;\n\t\t\t\t\t\t\tmagicString.overwrite( node.start, node.end, `${HELPERS_NAME}.commonjsRequire`, { storeName: true } );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tuses[ node.name ] = true;\n\t\t\t\t\t\tif ( node.name === 'global' && !ignoreGlobal ) {\n\t\t\t\t\t\t\tmagicString.overwrite( node.start, node.end, `${HELPERS_NAME}.commonjsGlobal`, { storeName: true } );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// if module or exports are used outside the context of an assignment\n\t\t\t\t\t\t// expression, we need to wrap the module\n\t\t\t\t\t\tif ( node.name === 'module' || node.name === 'exports' ) {\n\t\t\t\t\t\t\tshouldWrap = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( node.name === 'define' ) {\n\t\t\t\t\t\tmagicString.overwrite( node.start, node.end, 'undefined', { storeName: true } );\n\t\t\t\t\t}\n\n\t\t\t\t\tglobals.add( node.name );\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Is this an assignment to exports or module.exports?\n\t\t\tif ( node.type === 'AssignmentExpression' ) {\n\t\t\t\tif ( node.left.type !== 'MemberExpression' ) return;\n\n\t\t\t\tconst flattened = flatten( node.left );\n\t\t\t\tif ( !flattened ) return;\n\n\t\t\t\tif ( scope.contains( flattened.name ) ) return;\n\n\t\t\t\tconst match = exportsPattern.exec( flattened.keypath );\n\t\t\t\tif ( !match || flattened.keypath === 'exports' ) return;\n\n\t\t\t\tuses[ flattened.name ] = true;\n\n\t\t\t\t// we're dealing with `module.exports = ...` or `[module.]exports.foo = ...` –\n\t\t\t\t// if this isn't top-level, we'll need to wrap the module\n\t\t\t\tif ( programDepth > 3 ) shouldWrap = true;\n\n\t\t\t\tnode.left._skip = true;\n\n\t\t\t\tif ( flattened.keypath === 'module.exports' && node.right.type === 'ObjectExpression' ) {\n\t\t\t\t\treturn node.right.properties.forEach( prop => {\n\t\t\t\t\t\tif ( prop.computed || prop.key.type !== 'Identifier' ) return;\n\t\t\t\t\t\tconst name = prop.key.name;\n\t\t\t\t\t\tif ( name === makeLegalIdentifier( name ) ) namedExports[ name ] = true;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif ( match[1] ) namedExports[ match[1] ] = true;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// if this is `var x = require('x')`, we can do `import x from 'x'`\n\t\t\tif ( node.type === 'VariableDeclarator' && node.id.type === 'Identifier' && isRequireStatement( node.init ) ) {\n\t\t\t\t// for now, only do this for top-level requires. maybe fix this in future\n\t\t\t\tif ( scope.parent ) return;\n\n\t\t\t\t// edge case — CJS allows you to assign to imports. ES doesn't\n\t\t\t\tif ( assignedTo.has( node.id.name ) ) return;\n\n\t\t\t\tconst r = getRequired( node.init, node.id.name );\n\t\t\t\tr.importsDefault = true;\n\n\t\t\t\tif ( r.name === node.id.name ) {\n\t\t\t\t\tnode._shouldRemove = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !isRequireStatement( node ) ) return;\n\n\t\t\tconst r = getRequired( node );\n\n\t\t\tif ( parent.type === 'ExpressionStatement' ) {\n\t\t\t\t// is a bare import, e.g. `require('foo');`\n\t\t\t\tmagicString.remove( parent.start, parent.end );\n\t\t\t} else {\n\t\t\t\tr.importsDefault = true;\n\t\t\t\tmagicString.overwrite( node.start, node.end, r.name );\n\t\t\t}\n\n\t\t\tnode.callee._skip = true;\n\t\t},\n\n\t\tleave ( node ) {\n\t\t\tprogramDepth -= 1;\n\t\t\tif ( node.scope ) scope = scope.parent;\n\t\t\tif ( functionType.test( node.type ) ) lexicalDepth -= 1;\n\n\t\t\tif ( node.type === 'VariableDeclaration' ) {\n\t\t\t\tlet keepDeclaration = false;\n\t\t\t\tlet c = node.declarations[0].start;\n\n\t\t\t\tfor ( let i = 0; i < node.declarations.length; i += 1 ) {\n\t\t\t\t\tconst declarator = node.declarations[i];\n\n\t\t\t\t\tif ( declarator._shouldRemove ) {\n\t\t\t\t\t\tmagicString.remove( c, declarator.end );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( !keepDeclaration ) {\n\t\t\t\t\t\t\tmagicString.remove( c, declarator.start );\n\t\t\t\t\t\t\tkeepDeclaration = true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tc = declarator.end;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( !keepDeclaration ) {\n\t\t\t\t\tmagicString.remove( node.start, node.end );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tif ( !sources.length && !uses.module && !uses.exports && !uses.require && ( ignoreGlobal || !uses.global ) ) {\n\t\tif ( Object.keys( namedExports ).length ) {\n\t\t\tthrow new Error( `Custom named exports were specified for ${id} but it does not appear to be a CommonJS module` );\n\t\t}\n\t\treturn null; // not a CommonJS module\n\t}\n\n\tconst includeHelpers = shouldWrap || uses.global || uses.require;\n\tconst importBlock = ( includeHelpers ? [ `import * as ${HELPERS_NAME} from '${HELPERS_ID}';` ] : [] ).concat(\n\t\tsources.map( source => {\n\t\t\t// import the actual module before the proxy, so that we know\n\t\t\t// what kind of proxy to build\n\t\t\treturn `import '${source}';`;\n\t\t}),\n\t\tsources.map( source => {\n\t\t\tconst { name, importsDefault } = required[ source ];\n\t\t\treturn `import ${importsDefault ? `${name} from ` : ``}'${PREFIX}${source}';`;\n\t\t})\n\t).join( '\\n' ) + '\\n\\n';\n\n\tconst namedExportDeclarations = [];\n\tlet wrapperStart = '';\n\tlet wrapperEnd = '';\n\n\tconst moduleName = deconflict( scope, globals, getName( id ) );\n\tif ( !isEntry ) {\n\t\tconst exportModuleExports = {\n\t\t\tstr: `export { ${moduleName} as __moduleExports };`,\n\t\t\tname: '__moduleExports'\n\t\t};\n\n\t\tnamedExportDeclarations.push( exportModuleExports );\n\t}\n\n\tconst name = getName( id );\n\n\tfunction addExport ( x ) {\n\t\tconst deconflicted = deconflict( scope, globals, name );\n\n\t\tconst declaration = deconflicted === name ?\n\t\t\t`export var ${x} = ${moduleName}.${x};` :\n\t\t\t`var ${deconflicted} = ${moduleName}.${x};\\nexport { ${deconflicted} as ${x} };`;\n\n\t\tnamedExportDeclarations.push({\n\t\t\tstr: declaration,\n\t\t\tname: x\n\t\t});\n\t}\n\n\tif ( customNamedExports ) customNamedExports.forEach( addExport );\n\n\tconst defaultExportPropertyAssignments = [];\n\tlet hasDefaultExport = false;\n\n\tif ( shouldWrap ) {\n\t\tconst args = `module${uses.exports ? ', exports' : ''}`;\n\n\t\twrapperStart = `var ${moduleName} = ${HELPERS_NAME}.createCommonjsModule(function (${args}) {\\n`;\n\t\twrapperEnd = `\\n});`;\n\t} else {\n\t\tconst names = [];\n\n\t\tast.body.forEach( node => {\n\t\t\tif ( node.type === 'ExpressionStatement' && node.expression.type === 'AssignmentExpression' ) {\n\t\t\t\tconst left = node.expression.left;\n\t\t\t\tconst flattened = flatten( left );\n\n\t\t\t\tif ( !flattened ) return;\n\n\t\t\t\tconst match = exportsPattern.exec( flattened.keypath );\n\t\t\t\tif ( !match ) return;\n\n\t\t\t\tif ( flattened.keypath === 'module.exports' ) {\n\t\t\t\t\thasDefaultExport = true;\n\t\t\t\t\tmagicString.overwrite( left.start, left.end, `var ${moduleName}` );\n\t\t\t\t} else {\n\t\t\t\t\tconst name = match[1];\n\t\t\t\t\tconst deconflicted = deconflict( scope, globals, name );\n\n\t\t\t\t\tnames.push({ name, deconflicted });\n\n\t\t\t\t\tmagicString.overwrite( node.start, left.end, `var ${deconflicted}` );\n\n\t\t\t\t\tconst declaration = name === deconflicted ?\n\t\t\t\t\t\t`export { ${name} };` :\n\t\t\t\t\t\t`export { ${deconflicted} as ${name} };`;\n\n\t\t\t\t\tif ( name !== 'default' ) {\n\t\t\t\t\t\tnamedExportDeclarations.push({\n\t\t\t\t\t\t\tstr: declaration,\n\t\t\t\t\t\t\tname\n\t\t\t\t\t\t});\n\t\t\t\t\t\tdelete namedExports[name];\n\t\t\t\t\t}\n\n\t\t\t\t\tdefaultExportPropertyAssignments.push( `${moduleName}.${name} = ${deconflicted};` );\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif ( !hasDefaultExport ) {\n\t\t\twrapperEnd = `\\n\\nvar ${moduleName} = {\\n${\n\t\t\t\tnames.map( ({ name, deconflicted }) => `\\t${name}: ${deconflicted}` ).join( ',\\n' )\n\t\t\t}\\n};`;\n\t\t}\n\t}\n\tObject.keys( namedExports )\n\t\t.filter( key => !blacklist[ key ] )\n\t\t.forEach( addExport );\n\n\tconst defaultExport = /__esModule/.test( code ) ?\n\t\t`export default ${HELPERS_NAME}.unwrapExports(${moduleName});` :\n\t\t`export default ${moduleName};`;\n\n\tconst named = namedExportDeclarations\n\t\t.filter( x => x.name !== 'default' || !hasDefaultExport )\n\t\t.map( x => x.str );\n\n\tconst exportBlock = '\\n\\n' + [ defaultExport ]\n\t\t.concat( named )\n\t\t.concat( hasDefaultExport ? defaultExportPropertyAssignments : [] )\n\t\t.join( '\\n' );\n\n\tmagicString.trim()\n\t\t.prepend( importBlock + wrapperStart )\n\t\t.trim()\n\t\t.append( wrapperEnd + exportBlock );\n\n\tcode = magicString.toString();\n\tconst map = sourceMap ? magicString.generateMap() : null;\n\n\treturn { code, map };\n}\n","import { statSync } from 'fs';\nimport { dirname, extname, resolve, sep } from 'path';\nimport { sync as nodeResolveSync } from 'resolve';\nimport { createFilter } from 'rollup-pluginutils';\nimport { EXTERNAL, PREFIX, HELPERS_ID, HELPERS } from './helpers.js';\nimport defaultResolver from './defaultResolver.js';\nimport { checkFirstpass, checkEsModule, transformCommonjs } from './transform.js';\nimport { getName } from './utils.js';\n\nfunction getCandidatesForExtension ( resolved, extension ) {\n\treturn [\n\t\tresolved + extension,\n\t\tresolved + `${sep}index${extension}`\n\t];\n}\n\nfunction getCandidates ( resolved, extensions ) {\n\treturn extensions.reduce(\n\t\t( paths, extension ) => paths.concat( getCandidatesForExtension ( resolved, extension ) ),\n\t\t[resolved]\n\t);\n}\n\n// Return the first non-falsy result from an array of\n// maybe-sync, maybe-promise-returning functions\nfunction first ( candidates ) {\n\treturn function ( ...args ) {\n\t\treturn candidates.reduce( ( promise, candidate ) => {\n\t\t\treturn promise.then( result => result != null ?\n\t\t\t\tresult :\n\t\t\t\tPromise.resolve( candidate( ...args ) ) );\n\t\t}, Promise.resolve() );\n\t};\n}\n\nfunction startsWith ( str, prefix ) {\n\treturn str.slice( 0, prefix.length ) === prefix;\n}\n\n\nexport default function commonjs ( options = {} ) {\n\tconst extensions = options.extensions || ['.js'];\n\tconst filter = createFilter( options.include, options.exclude );\n\tconst ignoreGlobal = options.ignoreGlobal;\n\n\tconst customNamedExports = {};\n\tif ( options.namedExports ) {\n\t\tObject.keys( options.namedExports ).forEach( id => {\n\t\t\tlet resolvedId;\n\n\t\t\ttry {\n\t\t\t\tresolvedId = nodeResolveSync( id, { basedir: process.cwd() });\n\t\t\t} catch ( err ) {\n\t\t\t\tresolvedId = resolve( id );\n\t\t\t}\n\n\t\t\tcustomNamedExports[ resolvedId ] = options.namedExports[ id ];\n\t\t});\n\t}\n\n\tconst esModulesWithoutDefaultExport = [];\n\n\tconst allowDynamicRequire = !!options.ignore; // TODO maybe this should be configurable?\n\n\tconst ignoreRequire = typeof options.ignore === 'function' ?\n\t\toptions.ignore :\n\t\tArray.isArray( options.ignore ) ? id => ~options.ignore.indexOf( id ) :\n\t\t\t() => false;\n\n\tlet entryModuleIdsPromise = null;\n\n\tfunction resolveId ( importee, importer ) {\n\t\tif ( importee === HELPERS_ID ) return importee;\n\n\t\tif ( importer && startsWith( importer, PREFIX ) ) importer = importer.slice( PREFIX.length );\n\n\t\tconst isProxyModule = startsWith( importee, PREFIX );\n\t\tif ( isProxyModule ) importee = importee.slice( PREFIX.length );\n\n\t\treturn resolveUsingOtherResolvers( importee, importer ).then( resolved => {\n\t\t\tif ( resolved ) return isProxyModule ? PREFIX + resolved : resolved;\n\n\t\t\tresolved = defaultResolver( importee, importer );\n\n\t\t\tif ( isProxyModule ) {\n\t\t\t\tif ( resolved ) return PREFIX + resolved;\n\t\t\t\treturn EXTERNAL + importee; // external\n\t\t\t}\n\n\t\t\treturn resolved;\n\t\t});\n\t}\n\n\tconst sourceMap = options.sourceMap !== false;\n\n\tlet resolveUsingOtherResolvers;\n\n\tconst isCjsPromises = Object.create(null);\n\tfunction getIsCjsPromise ( id ) {\n\t\tlet isCjsPromise = isCjsPromises[id];\n\t\tif (isCjsPromise)\n\t\t\treturn isCjsPromise.promise;\n\n\t\tconst promise = new Promise( resolve => {\n\t\t\tisCjsPromises[id] = isCjsPromise = {\n\t\t\t\tresolve: resolve,\n\t\t\t\tpromise: undefined\n\t\t\t};\n\t\t});\n\t\tisCjsPromise.promise = promise;\n\n\t\treturn promise;\n\t}\n\tfunction setIsCjsPromise ( id, promise ) {\n\t\tconst isCjsPromise = isCjsPromises[id];\n\t\tif (isCjsPromise) {\n\t\t\tif (isCjsPromise.resolve) {\n\t\t\t\tisCjsPromise.resolve(promise);\n\t\t\t\tisCjsPromise.resolve = undefined;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tisCjsPromises[id] = { promise: promise, resolve: undefined };\n\t\t}\n\t}\n\n\treturn {\n\t\tname: 'commonjs',\n\n\t\toptions ( options ) {\n\t\t\tconst resolvers = ( options.plugins || [] )\n\t\t\t\t.map( plugin => {\n\t\t\t\t\tif ( plugin.resolveId === resolveId ) {\n\t\t\t\t\t\t// substitute CommonJS resolution logic\n\t\t\t\t\t\treturn ( importee, importer ) => {\n\t\t\t\t\t\t\tif ( importee[0] !== '.' || !importer ) return; // not our problem\n\n\t\t\t\t\t\t\tconst resolved = resolve( dirname( importer ), importee );\n\t\t\t\t\t\t\tconst candidates = getCandidates( resolved, extensions );\n\n\t\t\t\t\t\t\tfor ( let i = 0; i < candidates.length; i += 1 ) {\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tconst stats = statSync( candidates[i] );\n\t\t\t\t\t\t\t\t\tif ( stats.isFile() ) return candidates[i];\n\t\t\t\t\t\t\t\t} catch ( err ) { /* noop */ }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn plugin.resolveId;\n\t\t\t\t})\n\t\t\t\t.filter( Boolean );\n\n\t\t\tconst isExternal = id => options.external ?\n\t\t\t\tArray.isArray( options.external ) ? ~options.external.indexOf( id ) :\n\t\t\t\t\toptions.external(id) :\n\t\t\t\tfalse;\n\n\t\t\tresolvers.unshift( id => isExternal( id ) ? false : null );\n\n\t\t\tresolveUsingOtherResolvers = first( resolvers );\n\t\t\tconst input = options.input || options.entry;\n\t\t\tconst entryModules = Array.isArray(input) ?\n\t\t\t\tinput :\n\t\t\t\ttypeof input === 'object' && input !== null ?\n\t\t\t\t\tObject.values(input) :\n\t\t\t\t\t[input];\n\t\t\tentryModuleIdsPromise = Promise.all(\n\t\t\t\tentryModules.map( entry => resolveId( entry ))\n\t\t\t);\n\t\t},\n\n\t\tresolveId,\n\n\t\tload ( id ) {\n\t\t\tif ( id === HELPERS_ID ) return HELPERS;\n\n\t\t\t// generate proxy modules\n\t\t\tif ( startsWith( id, EXTERNAL ) ) {\n\t\t\t\tconst actualId = id.slice( EXTERNAL.length );\n\t\t\t\tconst name = getName( actualId );\n\n\t\t\t\treturn `import ${name} from ${JSON.stringify( actualId )}; export default ${name};`;\n\t\t\t}\n\n\t\t\tif ( startsWith( id, PREFIX ) ) {\n\t\t\t\tconst actualId = id.slice( PREFIX.length );\n\t\t\t\tconst name = getName( actualId );\n\n\t\t\t\treturn ( ( extensions.indexOf( extname( id ) ) === -1 ) ? Promise.resolve(false) : getIsCjsPromise( actualId ) )\n\t\t\t\t\t.then( isCjs => {\n\t\t\t\t\t\tif ( isCjs )\n\t\t\t\t\t\t\treturn `import { __moduleExports } from ${JSON.stringify( actualId )}; export default __moduleExports;`;\n\t\t\t\t\t\telse if (esModulesWithoutDefaultExport.indexOf(actualId) !== -1)\n\t\t\t\t\t\t\treturn `import * as ${name} from ${JSON.stringify( actualId )}; export default ${name};`;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\treturn `import * as ${name} from ${JSON.stringify( actualId )}; export default ( ${name} && ${name}['default'] ) || ${name};`;\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\ttransform ( code, id ) {\n\t\t\tif ( !filter( id ) ) return null;\n\t\t\tif ( extensions.indexOf( extname( id ) ) === -1 ) return null;\n\n\t\t\tconst transformPromise = entryModuleIdsPromise.then( (entryModuleIds) => {\n\t\t\t\tconst {isEsModule, hasDefaultExport, ast} = checkEsModule( this.parse, code, id );\n\t\t\t\tif ( isEsModule ) {\n\t\t\t\t\tif ( !hasDefaultExport )\n\t\t\t\t\t\tesModulesWithoutDefaultExport.push( id );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// it is not an ES module but not a commonjs module, too.\n\t\t\t\tif ( !checkFirstpass( code, ignoreGlobal ) ) {\n\t\t\t\t\tesModulesWithoutDefaultExport.push( id );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst transformed = transformCommonjs( this.parse, code, id, entryModuleIds.indexOf(id) !== -1, ignoreGlobal, ignoreRequire, customNamedExports[ id ], sourceMap, allowDynamicRequire, ast );\n\t\t\t\tif ( !transformed ) {\n\t\t\t\t\tesModulesWithoutDefaultExport.push( id );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\treturn transformed;\n\t\t\t}).catch(err => {\n\t\t\t\tthis.error(err, err.loc);\n\t\t\t});\n\n\t\t\tsetIsCjsPromise(id, transformPromise.then( transformed => transformed ? true : false, () => true ));\n\n\t\t\treturn transformPromise;\n\t\t}\n\t};\n}\n"],"names":["const","fs.statSync","let","flattened","r","nodeResolveSync","resolve","options","actualId","name","this"],"mappings":"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"}